<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: storage.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: storage.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// ========== storage.js ==========

/**
 * Clase para guardar y cargar datos en localStorage.
 */
class Storage {

  /**
   * Guarda los datos de la aplicación en localStorage.
   * @returns {void}
   */
  static guardar() {
    localStorage.setItem('cmdb_generos', JSON.stringify(Genero.lista));
    localStorage.setItem('cmdb_peliculas', JSON.stringify(Pelicula.lista));
  }

  /**
   * Carga los datos de la aplicación desde localStorage.
   * @returns {void}
   */
  static cargar() {
    const g = JSON.parse(localStorage.getItem('cmdb_generos')) || [];
    const p = JSON.parse(localStorage.getItem('cmdb_peliculas')) || [];

    Genero.lista = g.map(obj => new Genero(obj._id, obj._nombre));
    Pelicula.lista = p.map(obj => {
      const peli = new Pelicula(obj._id, obj._titulo, obj._fechaEstreno, obj._popularidad, obj.generos);
      peli._puntuaciones = obj._puntuaciones || [];
      return peli;
    });
  }

  /**
   * Inicializa los datos de la aplicación si no existen.
   * @returns {void}
   */
  static inicializar() {
    if (!localStorage.getItem('cmdb_generos')) {
      Genero.lista = [
        new Genero(1, "Comedia"),
        new Genero(2, "Drama"),
        new Genero(3, "Ciencia ficción"),
      ];
      Pelicula.lista = [
        new Pelicula(1, "Titanic", "1998-01-08", 80, [2]),
        new Pelicula(2, "Volver", "2006-03-10", 70, [1]),
        new Pelicula(3, "Matrix", "1999-06-23", 40, [3]),
        new Pelicula(4, "El corredor del laberinto", "2014-09-19", 60, [2]),
        new Pelicula(5, "El padrino", "1972-10-20", 30, [2])
      ];
      Storage.guardar();
    } else {
      Storage.cargar();
    }
  }

}

</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Genero.html">Genero</a></li><li><a href="Pelicula.html">Pelicula</a></li><li><a href="Storage.html">Storage</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.5</a> on Wed Nov 12 2025 12:29:54 GMT+0100 (hora estándar de Europa central)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
