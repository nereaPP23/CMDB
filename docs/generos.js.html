<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: generos.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: generos.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// ========== generos.js ==========

/**
 * Clase para gestionar géneros.
 */
class Genero {
  /**
   * @param {Number} id El id del género.
   * @param {String} nombre El nombre del género.
   */
  constructor(id, nombre = "género desconocido") {
    this._id = id;
    this._nombre = nombre.slice(0, 100);
  }

  
  /**
   * @returns {Number} El id del género.
   */
  get id() { return this._id; }

  /**
   * @returns {String} El nombre del género.
   */
  get nombre() { return this._nombre; }

  /**
   * @param {String} n El nuevo nombre del género (max 100 caracteres).
   */
  set nombre(n) { this._nombre = n.slice(0, 100); }



  /**
   * Crea un genero dado un nombre.
   * @param {String} nombre El nombre del género a crear.
   * @returns {Genero} El género creado.
   */
  static crear(nombre) {
    const id = Genero.lista.length ? Math.max(...Genero.lista.map(g => g.id)) + 1 : 1;
    const nuevo = new Genero(id, nombre);
    Genero.lista.push(nuevo);
    Storage.guardar();
    return nuevo;
  }

  
  /**
   * Elimina un género dado su id.
   * @param {Number} id El id del género a eliminar.
   * @returns {Boolean} True si se ha eliminado correctamente, false en caso contrario.
   * @throws {Error} Si el género no existe.
   */
  static eliminar(id) {
    id = parseInt(id);
    const genero = Genero.lista.find(g => g.id === id);
    if (!genero) throw new Error("Género no encontrado");

    //Comprobar si hay películas con ese género
    const usadas = Pelicula.lista.filter(p => p.generos.includes(id));
    if (usadas.length > 0) {
      alert(`No se puede eliminar. ${usadas.length} películas tienen este género. Primero quítalo de esas películas.`);
      return false;
    }

    Genero.lista = Genero.lista.filter(g => g.id !== id);
    Storage.guardar();
    Genero.mostrar();
    return true;
  }


  /**
   * Modifica el nombre de un género dado su id.
   * @param {Number} id El id del género a modificar.
   * @param {String} nuevoNombre El nuevo nombre del género.
   * @throws {Error} Si el género no existe.
   */
  static modificar(id, nuevoNombre) {
    id = parseInt(id);
    const genero = Genero.lista.find(g => g.id === id);
    if (!genero) throw new Error("Género no encontrado");
    genero.nombre = nuevoNombre;
    Storage.guardar();
    Genero.mostrar();
  }



  /**
   * Muestra la lista de géneros.
   * @returns {void}
   */
  static mostrar() {
    const ul = document.getElementById("listaGeneros");
    const select = document.getElementById("generoSelect");
    ul.innerHTML = "";
    select.innerHTML = "";

    Genero.lista.forEach(g => {
      const li = document.createElement("li");
      li.textContent = `${g.id} - ${g.nombre}`;
      ul.appendChild(li);

      const opt = document.createElement("option");
      opt.value = g.id;
      opt.textContent = g.nombre;
      select.appendChild(opt);
    });
  }
}


/**
 * Lista de géneros
 * @type {Genero[]} 
 */
Genero.lista = []; 
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Genero.html">Genero</a></li><li><a href="Pelicula.html">Pelicula</a></li><li><a href="Storage.html">Storage</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.5</a> on Wed Nov 12 2025 12:29:54 GMT+0100 (hora estándar de Europa central)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
